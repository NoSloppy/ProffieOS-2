Ok, I’ve checked in some code that cleans up how preon/postoff works a bit.
It also implements these features:

Per-effect volume
Per-effect “paired” setting.
EFFECT_POSTOFF
preon->ignition transition is now gapless
That means that your config.txt file in the font directory can now have new values of the form:

ProffieOS.SFX.EFFECTNAME.volume=100
ProffieOS.SFX.EFFECTNAME.paired=0
Where EFFECTNAME can be “preon”, “out”, “pstoff”, etc.
If paired is set to 1 AND the number of files in the next effect is the same as in the paired effect, then if you play preon17, it will follow that with out17.

The volume is perhaps a little more self-explanatory. It lets you set the volume for each effect individually, in percent. The default is 100. Setting it to 50 makes it half as loud. Setting it to 200 makes it twice as loud. Maximum allowed value is currently 255.

EFFECT_POSTOFF doesn’t change anything about sound playing, but it makes it possible to trigger blade effects based on the postoff playback.

Btw, the per-effect volume will probably not work for some effects, like hum, swing, swingl and swingh, because those effects get their volume adjusted continuously, and they need special code to read the effect volume. I might try to fix that later, but I don’t think it’s super important as those things already have variables for adjusting them.


---------
WavNum<> or WavNum<EFFECT_XXXX>
---------
As your reward I have implemented Wavnum.
Works like Wavlen, but returns the file number of the played file.
Should work well together with ColorSelect.

--- Use with ColorSelect<SELECTION, TRANSITION, COLOR1, COLOR2, ...> Where SELECTION is the function. COLORs can be preon1 preon2 etc!
Odds and  evens if just 2 colors but more sounds. SO MATCH SOUNDS TO # OF COLORS (preon TransitionEffects) and ...good?
 
Let’s say you have clash01.wav to clash08.wav.
If ProffieOS chooses clash05.wav, then WavNum will return 4.
(clash01 = 0, clash02 =1, clash03 = 2, clash04 =3, clash05 = 5)

If you use a ColorSelect<WavNum, COLORA, COLORB> with two colors, then COLORA will be for 0, 2, 4, etc. And COLORB will be used for 1,3,5…

If your ColorSelect has the same number of colors as there are number of files, then it should line up so that COLORA is for clash01, COLORB is for clash02, COLORC is for clash03, etc.
//what if more colors than waves? Or vice versa wavs > COLORS ?
A division by zero would occur if your ColorSelect<> had zero choices.

